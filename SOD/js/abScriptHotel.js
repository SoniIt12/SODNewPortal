function ResetVariables(){source="",destination="",sourcecode="",destinationcode="",destinationid=""}function HotelValidation(){destinationid="",$.ajax({type:"GET",url:"xml/HotelCities.xml",dataType:"xml",success:parseXmlHotelPage,failure:function(t){alert(t.d),alert("failure")},error:function(t){alert(t.d),alert("error")}})}function parseXmlHotelPage(t){$(t).find("Hotel").each(function(){destination.toLowerCase()==$(this).find("Name").text().toLowerCase()&&(destinationid=$(this).find("Id").text())});var e=$("#txtHcheckin").val(),a=$("#txtHcheckout").val(),n=$("#txtadult_Hotel").val(),i=$("#txtchild_Hotel").val(),o=$("#txtinfant_Hotel").val();getDateType(e),new Date;if(""==e)return alert("Check-In Date is required."),!1;if(""==a)return alert("Check-Out Date is required."),!1;if(""!=a&&getDateType(e)>=getDateType(a))return alert("Check-Out Date should be greater than Check-In Date."),!1;ddat=e.split("/"),e=ddat[2]+ddat[1]+ddat[0],""!=a&&(adat=a.split("/"),a=adat[2]+adat[1]+adat[0]);var r="./hoteldetails.html?val="+destination+"/"+destinationid+"/"+e+"/"+a+"/"+n+"/"+i+"/"+o;$("#btnSearchHotel").removeAttr("disabled"),$(location).attr("href",r)}function GetParameterValues_Hotel(){var t=window.location.href.slice(window.location.href.indexOf("?")+1),e=t.split("=")[1].split("/");destination=e[0],destinationid=e[1],ddate=e[2],adate=e[3],adult=e[4],child=e[5],infant=e[6],distributeHotelPax(adult,child,infant)}function LoadValues_Hotel(){$("#txtHotelCity").val(destination);var t=parseInt(adult)+parseInt(child)+parseInt(infant);if($("#txtpassenger_Hotel").val(t+" Passenger(s)"),$("#txtHcheckin").val(ddate.slice(6,8)+"/"+ddate.slice(4,6)+"/"+ddate.slice(0,4)),""!=adate){$("#txtHcheckout").val(adate.slice(6,8)+"/"+adate.slice(4,6)+"/"+adate.slice(0,4));var e=getDateType($("#txtHcheckin").val()),a=getDateType($("#txtHcheckout").val()),n=parseInt((a-e)/864e5);$("#txtNight").val(n+" Nights")}$("#txtadult_Hotel").val(adult),$("#txtchild_Hotel").val(child),$("#txtinfant_Hotel").val(infant),roomstring=distributeHotelPax(parseInt(adult,10),parseInt(child,10),parseInt(infant,10)),roomselctdv(roomstring)}function LoadHotelPage(){GetParameterValues_Hotel(),LoadValues_Hotel();var page={};page.pageIndex=1,page.pageSize=10,page.source=sourcecode,page.destination=destinationcode,page.cityid=destinationid,page.ddate=ddate,page.adate=adate,page.adult=adult,page.child=child,page.infant=infant,$.ajax({type:"POST",url:"HAPI.aspx/GetHotels",data:JSON.stringify({page:page}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccessHotel,failure:function(t){alert(t.d),alert("failure")},error:function(xhr,status,exception){$("#divloader").hide(),$("#loader").hide(),$("#HolePage_Hotel").show();var err=eval("("+xhr.responseText+")");alert(err.Message)}})}function LoadHotelPageByDone(mrs,ad,ch,inf){$("#loader").show();var page={};page.pageIndex=1,page.pageSize=10,page.source=sourcecode,page.destination=destinationcode,page.cityid=destinationid,page.ddate=ddate,page.adate=adate,page.adult=adult=ad,page.child=child=ch,page.infant=infant=inf,page.mrs=mrs,$.ajax({type:"POST",url:"HAPI.aspx/GetHotels",data:JSON.stringify({page:page}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccessHotel,failure:function(t){alert(t.d),alert("failure")},error:function(xhr,status,exception){$("#divloader").hide(),$("#loader").hide(),$("#HolePage_Hotel").show();var err=eval("("+xhr.responseText+")");alert(err.Message)}})}function doScorejs(t,e){$(".demo-live-application",e).score({number:5,size:20,color:"yellow",score:t,vertical:!1,hints:["bad","poor","regular","good","gorgeous"],readOnly:!1,fontAwesome:!0,debug:!1})}function OnSuccessHotel(t){var e=$.parseXML(t.d),a=$(e),n=parseInt(a.find("PageCount").eq(0).find("Min").text()),i=parseInt(a.find("PageCount").eq(0).find("Max").text());$("#txthotelpriceslider").ionRangeSlider({hide_min_max:!0,keyboard:!0,min:n,max:i,from:n,to:i,type:"double",step:50,prefix:"&#8377;",grid:!1,onFinish:function(t){var e=$("#txthotelpriceslider"),a=e.prop("value").split(";");FilterByPackage_Hotel(a[0],a[1])}});var o=a.find("HotelDetails");$("#dvmain table").eq(0).show();var r=$("#dvmain table").eq(0).clone(!0);$("#dvmain table").remove(),o.each(function(){var t=$(this);$("#hotelname",r).html(t.find("hn").text());var e=""==t.find("l").text()?"":"("+t.find("l").text()+")";$("#hlocation",r).html(e),$("#hdprc",r).val(t.find("mp").text()),$("#hdhc",r).val(t.find("hc").text()),$("#review",r).empty();t.find("t").text();$("#imghotel",r).attr("src",t.find("t").text()),$("#oldamount",r).html(formatNumber(parseInt(t.find("op").text()))),$("#totalamount",r).html(formatNumber(parseInt(t.find("mp").text()))),$("#discount",r).html(formatNumber(parseInt(t.find("discount").text()))),0==parseInt(t.find("discount").text())?($(".innr_crossprize",r).attr("style","display:none"),$(".innr_yousave",r).attr("style","display:none")):($(".innr_crossprize",r).attr("style","display:block"),$(".innr_yousave",r).attr("style","display:block"));var a=t.find("hr").text();doScorejs(a,r),$(".gr",r).html(t.find("gr").text());var n="1",i=destinationid+"/"+ddate+"/"+adate+"/"+n+"/"+adult+"/"+child+"/"+infant,o=i+"/"+t.find("hc").text()+"/"+t.find("ibp").text()+"/''",d='goHotelDetail("'+o+'");';$(".innr_bookbtn",r).attr("onclick",d),$("#dvmain").append(r),r=$("#dvmain table").eq(0).clone(!0)});var d=a.find("Locations");$("#ddlArea").empty(),$("#ddlArea").append("<option value=All>All Locations</option>"),d.each(function(){var t=$(this),e=t.find("l").text();$("#ddlArea").append('<option value="'+e+'">'+e+"</option>")});var l=a.find("Hotels");l.each(function(){var t=$(this),e=t.find("hn").text();hotelArr.push(e)}),sflag=1,$("#divloader").hide(),$("#loader").hide(),$("#HolePage_Hotel").show()}function GetRecords_Hotel(){pageIndex++;var page={};(2==pageIndex||pageCount>=pageIndex)&&($("#imgloader").show(),page.pageIndex=pageIndex,page.pageSize=10,$.ajax({type:"POST",url:"HAPI.aspx/GetFlightsOnScroll",data:JSON.stringify({page:page}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccesss_Hotel,failure:function(t){alert(t.d)},error:function(xhr,status,exception){var err=eval("("+xhr.responseText+")");alert(err.Message)}}))}function OnSuccesss_Hotel(t){var e=$.parseXML(t.d),a=$(e);pageCount=parseInt(a.find("PageCount").eq(0).find("PageCount").text());var n=a.find("Flights");n.each(function(){var t=$(this),e=$("#dvmain table").eq(0).clone(!0);$("#hotelname",e).html(t.find("hn").text());var a=""==t.find("l").text()?"":"("+t.find("l").text()+")";$("#hlocation",e).html(a),$("#hdprc",e).val(t.find("mp").text()),$("#hdhc",e).val(t.find("hc").text()),$("#review",e).empty();t.find("t").text();$("#imghotel",e).attr("src",t.find("t").text()),$("#oldamount",e).html(formatNumber(parseInt(t.find("op").text()))),$("#totalamount",e).html(formatNumber(parseInt(t.find("mp").text()))),$("#discount",e).html(formatNumber(parseInt(t.find("discount").text()))),0==parseInt(t.find("discount").text())?($(".innr_crossprize",e).attr("style","display:none"),$(".innr_yousave",e).attr("style","display:none")):($(".innr_crossprize",e).attr("style","display:block"),$(".innr_yousave",e).attr("style","display:block"));var n=t.find("hr").text();doScorejs(n,e),$(".gr",e).html(t.find("gr").text());var i="1",o=destinationid+"/"+ddate+"/"+adate+"/"+i+"/"+adult+"/"+child+"/"+infant,r=o+"/"+t.find("hc").text()+"/"+t.find("ibp").text()+"/''",d='goHotelDetail("'+r+'");';$(".innr_bookbtn",e).attr("onclick",d),$("#dvmain").append(e)}),sflag=1,$("#imgloader").hide()}function CountPassenger_Hotel(){var t=parseInt($("#txtadult_Hotel").val()),e=parseInt($("#txtchild_Hotel").val()),a=parseInt($("#txtinfant_Hotel").val()),n="";return a>t&&(alert("Infant can not exceed number of adults"),$("#txtinfant_Hotel").val(0),a=0),t+e+a>9&&(n="Maximum 9 passengers are allowed.",$("#txtinfant_Hotel").val(0),a=0),t+e+a>9&&(n="Maximum 9 passengers are allowed.",$("#txtchild_Hotel").val(0),e=0),""!=n&&alert(n),t+e+a}function CountPassenger_HotelDDL(){var t=parseInt($("#ddladult_Hotel").val()),e=parseInt($("#ddlchild_Hotel").val()),a=parseInt($("#ddlinfant_Hotel").val()),n="";return a>t&&(alert("Infant can not exceed number of adults"),$("#ddlinfant_Hotel").val(0),a=0),t+e+a>9&&(n="Maximum 9 passengers are allowed.",$("#ddlinfant_Hotel").val(0),a=0),t+e+a>9&&(n="Maximum 9 passengers are allowed.",$("#ddlchild_Hotel").val(0),e=0),""!=n&&alert(n),t+e+a}function OnSuccessFilterByHotelStar_Hotel(t){var e=$.parseXML(t.d),a=$(e),n=a.find("Flights");$("#dvmain table").eq(0).show();var i=$("#dvmain table").eq(0).clone(!0);n.length>0&&$("#dvmain table").remove(),n.each(function(){var t=$(this);$("#hotelname",i).html(t.find("hn").text());var e=""==t.find("l").text()?"":"("+t.find("l").text()+")";$("#hlocation",i).html(e),$("#hdprc",i).val(t.find("mp").text()),$("#hdhc",i).val(t.find("hc").text()),$("#review",i).empty();t.find("t").text();$("#imghotel",i).attr("src",t.find("t").text()),$("#oldamount",i).html(formatNumber(parseInt(t.find("op").text()))),$("#totalamount",i).html(formatNumber(parseInt(t.find("mp").text()))),$("#discount",i).html(formatNumber(parseInt(t.find("discount").text()))),0==parseInt(t.find("discount").text())?($(".innr_crossprize",i).attr("style","display:none"),$(".innr_yousave",i).attr("style","display:none")):($(".innr_crossprize",i).attr("style","display:block"),$(".innr_yousave",i).attr("style","display:block"));var a=t.find("hr").text();doScorejs(a,i),$(".gr",i).html(t.find("gr").text());var n="1",o=destinationid+"/"+ddate+"/"+adate+"/"+n+"/"+adult+"/"+child+"/"+infant,r=o+"/"+t.find("hc").text()+"/"+t.find("ibp").text()+"/''",d='goHotelDetail("'+r+'");';$(".innr_bookbtn",i).attr("onclick",d),$("#dvmain").append(i),i=$("#dvmain table").eq(0).clone(!0)}),pageIndex=1,sflag=1,$("#imgloadingpr").hide(),$("#divloader").hide(),$(".mainsort").show()}function FilterByHotelStar_Hotel(){var stars=new Array,counter=0;$(".akordeon-item-body input[type=checkbox]").each(function(){this.checked&&(stars[counter]=this.value,counter++)}),$.ajax({type:"POST",url:"HAPI.aspx/FilterByHotelStar",data:JSON.stringify({arr:stars}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccessFilterByHotelStar_Hotel,failure:function(t){alert(t.d)},error:function(xhr,status,exception){var err=eval("("+xhr.responseText+")");alert(err.Message)}})}function FilterByPackage_Hotel(source,destination){var page={};page.source=source,page.destination=destination,$.ajax({type:"POST",url:"HAPI.aspx/FilterByPackage",data:JSON.stringify({page:page}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccessFilterByHotelStar_Hotel,failure:function(t){alert(t.d)},error:function(xhr,status,exception){var err=eval("("+xhr.responseText+")");alert(err.Message)}})}function FilterByParameter_Hotel(source,destination){var page={};page.source=source,page.destination=destination,$.ajax({type:"POST",url:"HAPI.aspx/FilterByParameter",data:JSON.stringify({page:page}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccessFilterByHotelStar_Hotel,failure:function(t){alert(t.d)},error:function(xhr,status,exception){var err=eval("("+xhr.responseText+")");alert(err.Message)}})}function goHotelDetail(t){var e="./HotelBooking.html?val="+t+"/"+roomstring;$(location).attr("href",e)}function LoadHotelDetails(){var url=window.location.href.slice(window.location.href.indexOf("?")+1),d=url.split("=")[1].split("/"),cityid=d[0];destinationid=d[0],checkin=d[1],checkout=d[2];var rooms=d[3];if(adult=d[4],child=d[5],infant=d[6],hc=d[7],ibp=d[8],fwdp='""',roomstring=d[10],$("#txtHcheckin").val(checkin.slice(6,8)+"/"+checkin.slice(4,6)+"/"+checkin.slice(0,4)),""!=checkout){$("#txtHcheckout").val(checkout.slice(6,8)+"/"+checkout.slice(4,6)+"/"+checkout.slice(0,4));var date1=getDateType($("#txtHcheckin").val()),date2=getDateType($("#txtHcheckout").val()),diffDays=parseInt((date2-date1)/864e5);night=diffDays}room=roomstring.split("-")[0];var passengers=parseInt(adult)+parseInt(child)+parseInt(infant);$("#txtpassenger_Hotel").val(passengers+" Passenger(s)"),$("#ddladult_Hotel").val(adult),$("#ddlchild_Hotel").val(child),$("#ddlinfant_Hotel").val(infant);var JSONObject={cityid:cityid,checkin:checkin,checkout:checkout,noofadults:adult,noofchildrens:child,noofinfants:infant,hc:hc,ibp:ibp,fwdp:fwdp,roomstring:roomstring},jsonData=JSON.stringify(JSONObject),$roompopupbody=$("#chngeroom_body");return $(".dialog-body").append("Loading..."),$.ajax({type:"POST",url:"HAPI.aspx/GetHotelDetails",data:jsonData,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var e=$.parseXML(t.d),a=$(e),n=a.find("Gallery");rums=a.find("RoomsDetail");var i=a.find("HotelDetail");$("#hn_pchangeroom",$roompopupbody).html(i.find("hn").text()),$("#address_pchnageroom",$roompopupbody).html(i.find("address").text()),doScorejs(i.find("hr").text(),$roompopupbody),$("#am").html(i.find("am").text()),$("#dining").html(i.find("dining").text()),$("#bc").attr("src","New_images/fl/"+i.find("bc").text()+".png"),$("#int").attr("src","New_images/fl/"+i.find("freeint").text()+".png"),$("#gym").attr("src","New_images/fl/"+i.find("gym").text()+".png"),$("#sp").attr("src","New_images/fl/"+i.find("sp").text()+".png"),$("#rest").attr("src","New_images/fl/"+i.find("rest").text()+".png");var o=($(".carousel-inner",$roompopupbody).clone(!0),$(".carousel-thumbnails li",$roompopupbody).eq(0).clone(!0),0);n.each(function(){var t=$(this);0==o&&($(".carousel-inner img",$roompopupbody).eq(o).attr("src",t.find("Picture").text()),$(".carousel-inner img",$roompopupbody).eq(o+1).attr("src",t.find("Picture").text()),$(".third",$roompopupbody).eq(o).attr("src",t.find("Picture").text()),$(".description",$roompopupbody).html(t.find("Title").text())),$(".carousel-thumbnails #img"+o,$roompopupbody).attr("src",t.find("Thumbnail").text()),$(".carousel-thumbnails #img"+o,$roompopupbody).attr("data-big",t.find("Picture").text()),$(".carousel-thumbnails #img"+o,$roompopupbody).attr("alt",t.find("Title").text()),o+=1});for(var r=o;12>=r;r++)$(".carousel-thumbnails #img"+r,$roompopupbody).parent().remove();$("#loader").hide();var d=$("#divroom").clone(!0);$("#divrooms").empty();var l=0;rums.each(function(t){var e=$(this);0==l&&($("#op").html(e.find("op").text()),$("#mp").html(e.find("mp").text()),$("#discount").html(e.find("discount").text()),$("#tp").html(e.find("tp").text()),rtc=e.find("rtc").text(),rpc=e.find("rpc").text(),ibp=e.find("ibp").text(),fwdp=e.find("fwdp").text(),"0"==e.find("discount").text()?($("#divop").hide(),$("#divdiscount").hide()):($("#divop").show(),$("#divdiscount").show()));var a=""==e.find("image").text()?"New_images/noImage.png":e.find("image").text();d.find("img").attr("src",a),$("#rtn",d).html(e.find("rtn").text()),$("#amn",d).html(e.find("amn").text()),$("#roomprice",d).html(e.find("mp").text()),$("#checkintime").html(e.find("checkintime").text()),$("#checkouttime").html(e.find("checkouttime").text());var n=document.createElement("option");n.text=e.find("rtn").text(),n.value=e.find("rpc").text(),document.getElementById("selroomtype").options.add(n),$("#tpfor").html("for "+room+" Room "+night+" Night <br>Excludes Taxes"),$("#btnselectroom",d).attr("onclick","ChangeRoom("+e.find("rpc").text()+");"),$("#btnselectroom",d).attr("src","New_images/imgred.png"),$("#btnselectroom",d).attr("alt",e.find("rpc").text()),0==t&&$("#btnselectroom",d).attr("src","New_images/imggreen.png"),$("#divrooms").append(d),d=$("#divrooms #divroom").eq(0).clone(!0),l++}),$("#btnbooknow").attr("onclick","gobookingHotel();");var s="hotels-"+cityid+"-"+checkin+"-"+checkout+"-"+roomstring+"|rtc="+rtc+"|rpc="+rpc+"|hc="+hc+"|fwdp=''|ibp="+ibp;$("#hotelpolicy").html("Loading..."),$("#hotelpolicy").load("GetHotelPolicy.aspx?query="+s+" #lblHotelPolicy"),$("#hn").html(i.find("hn").text()),$("#hname").html(i.find("hn").text()),$("#gr").html(i.find("gr").text()),$("#city").html(i.find("c").text()),$("#hddreviews").load("GetReview1.aspx?hc="+hc+" #lblReview",function(t,e,a){var n=$("#hddreviews").html();n=n.substring(n.indexOf(">")+1,n.lastIndexOf("<"));var i=n.split("|");$("#reviews").html(i[0]),$("#rat1").html(i[1]),$("#rat2").html(i[2]),$("#rat3").html(i[3]),$("#rat4").html(i[4]),$("#rat5").html(i[5]),$("#rat6").html(i[6]),$("#jqmeter-horizontal1").jQMeter({goal:"5.0",raised:i[1],width:"200px",height:"6px",bgColor:"#dadada",barColor:"#FA181A",animationSpeed:1e3,displayTotal:!1}),$("#jqmeter-horizontal2").jQMeter({goal:"5.0",raised:i[2],width:"200px",height:"6px",bgColor:"#dadada",barColor:"#FA181A",animationSpeed:1e3,displayTotal:!1}),$("#jqmeter-horizontal3").jQMeter({goal:"5.0",raised:i[3],width:"200px",height:"6px",bgColor:"#dadada",barColor:"#FA181A",animationSpeed:1e3,displayTotal:!1}),$("#jqmeter-horizontal4").jQMeter({goal:"5.0",raised:i[4],width:"200px",height:"6px",bgColor:"#dadada",barColor:"#FA181A",animationSpeed:1e3,displayTotal:!1}),$("#jqmeter-horizontal5").jQMeter({goal:"5.0",raised:i[5],width:"200px",height:"6px",bgColor:"#dadada",barColor:"#FA181A",animationSpeed:1e3,displayTotal:!1}),$("#jqmeter-horizontal6").jQMeter({goal:"5.0",raised:i[6],width:"200px",height:"6px",bgColor:"#dadada",barColor:"#FA181A",animationSpeed:1e3,displayTotal:!1})}),$("#loader").hide(),google.maps.event.addDomListener(window,"load",init_map(i.find("la").text(),i.find("lo").text(),i.find("hn").text(),i.find("address").text())),$("#loader").hide()},failure:function(t){alert("failure")},error:function(xhr,status,exception){$("#loader").hide();var err=eval("("+xhr.responseText+")");alert(err.Message)}}),"Loading..."}function LoadHotelDetails_PaxChange(){$("#divop").hide(),$("#divmp").hide(),$("#divdiscount").hide(),$("#tpfor").empty(),$("#tp").html("Loading..."),$(".prngiht").html("Loading...");var url=window.location.href.slice(window.location.href.indexOf("?")+1),d=url.split("=")[1].split("/"),cityid=d[0];destinationid=d[0],checkin=d[1],checkout=d[2];var rooms=d[3];adult=$("#ddladult_Hotel").val(),child=$("#ddlchild_Hotel").val(),infant=$("#ddlinfant_Hotel").val(),hc=d[7],ibp=d[8],fwdp='""',$("#txtHcheckin").val(checkin.slice(6,8)+"/"+checkin.slice(4,6)+"/"+checkin.slice(0,4)),$("#txtHcheckout").val(checkout.slice(6,8)+"/"+checkout.slice(4,6)+"/"+checkout.slice(0,4));var date1=getDateType($("#txtHcheckin").val()),date2=getDateType($("#txtHcheckout").val()),diffDays=parseInt((date2-date1)/864e5);night=diffDays;var roomstring=distributeHotelPax(parseInt(adult,10),parseInt(child,10),parseInt(infant,10));room=roomstring.split("-")[0];var JSONObject={cityid:cityid,checkin:checkin,checkout:checkout,noofadults:adult,noofchildrens:child,noofinfants:infant,hc:hc,ibp:ibp,fwdp:fwdp},jsonData=JSON.stringify(JSONObject);return $.ajax({type:"POST",url:"HAPI.aspx/GetHotelDetails_PaxChange",data:jsonData,contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){var e=$.parseXML(t.d),a=$(e);rums=a.find("RoomsDetail"),$("#selroomtype").empty();var n=$("#divroom").clone(!0);$("#divrooms").empty();var i=0;rums.each(function(){var t=$(this);0==i&&($("#op").html(t.find("op").text()),$("#mp").html(t.find("mp").text()),$("#discount").html(t.find("discount").text()),$("#tp").html(t.find("tp").text()),$(".prngiht").html("Per room per night"),rtc=t.find("rtc").text(),rpc=t.find("rpc").text(),ibp=t.find("ibp").text(),fwdp=t.find("fwdp").text(),"0"==t.find("discount").text()?($("#divop").hide(),$("#divdiscount").hide()):($("#divop").show(),$("#divdiscount").show()),$("#divmp").show()),n.find("img").attr("src",t.find("image").text()),$("#rtn",n).html(t.find("rtn").text()),$("#amn",n).html(t.find("amn").text()),$("#roomprice",n).html(t.find("mp").text());var e=document.createElement("option");e.text=t.find("rtn").text(),e.value=t.find("rpc").text(),document.getElementById("selroomtype").options.add(e),$("#tpfor").html("for "+room+" Room "+night+" Night <br>Excludes Taxes"),$("#btnselectroom",n).attr("onclick","ChangeRoom("+t.find("rpc").text()+");"),$("#divrooms").append(n),n=$("#divrooms #divroom").eq(0).clone(!0),i++}),$("#btnbooknow").attr("onclick","gobookingHotel();")},failure:function(t){alert("failure")},error:function(xhr,status,exception){var err=eval("("+xhr.responseText+")");alert(err.Message)}}),"Loading..."}function ChangeRoom(t){rums.each(function(){var e=$(this);t==e.find("rpc").text()&&($("#op").html(e.find("op").text()),$("#mp").html(e.find("mp").text()),$("#discount").html(e.find("discount").text()),$("#tp").html(e.find("tp").text()),$("#selroomtype").val(t),rtc=e.find("rtc").text(),rpc=e.find("rpc").text(),ibp=e.find("ibp").text(),fwdp=e.find("fwdp").text(),"0"==e.find("discount").text()?($("#divop").hide(),$("#divdiscount").hide()):($("#divop").show(),$("#divdiscount").show()))}),$("#divrooms #btnselectroom").each(function(){$(this);$(this).attr("src","New_images/imgred.png"),$(this).attr("alt")==t&&$(this).attr("src","New_images/imggreen.png")})}function SortByParameter_Hotel(thisvalue){$("#imgloadingpr").show();var param1,asc;param1=thisvalue.split("|")[0],asc=thisvalue.split("|")[1],$.ajax({type:"POST",url:"HAPI.aspx/SortByParameter_Hotel",data:JSON.stringify({param1:param1,asc:asc}),contentType:"application/json; charset=utf-8",dataType:"json",success:OnSuccessFilterByHotelStar_Hotel,failure:function(t){alert(t.d)},error:function(xhr,status,exception){var err=eval("("+xhr.responseText+")");alert(err.Message),$("#imgloadingpr").hide()}})}function gobookingHotel(){var djson={};djson.hc=hc,djson.cityid=destinationid,djson.ddate=checkin,djson.adate=checkout,djson.adult=adult,djson.child=child,djson.infant=infant,djson.rtc=rtc,djson.rpc=rpc,djson.ibp=ibp,djson.fwdp=fwdp,djson.roomstring=roomstring,$.ajax({type:"POST",url:"HAPI.aspx/GoToBookingPage_Hotel",data:JSON.stringify(djson),contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){t.d;if("success"==t.d){var e="./BookingHotel.aspx";$(location).attr("href",e)}else alert("Sorry!!! some error occurred.")},failure:function(t){alert(t.d),alert("failure")},error:function(xhr,status,exception){$("#imgloadingpr").hide();var err=eval("("+xhr.responseText+")");alert(err.Message)}})}function formatNumber(t){t=t.toFixed(2)+"",x=t.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var e=/(\d+)(\d{3})/;e.test(x1);)x1=x1.replace(e,"$1,$2");return x1}function getDateType(t){var e="";if(""!=t){var a=t.split("/"),n=parseInt(a[0],10),i=parseInt(a[1],10),o=parseInt(a[2],10);e=new Date(o,i-1,n)}return e}function isDate(t){var e=t;if(""==e)return!1;var a=/^(\d{1,2})(\/|-)(\d{1,2})(\/|-)(\d{4})$/,n=e.match(a);if(null==n)return!1;if(dtDay=n[1],dtMonth=n[3],dtYear=n[5],dtMonth<1||dtMonth>12)return!1;if(dtDay<1||dtDay>31)return!1;if((4==dtMonth||6==dtMonth||9==dtMonth||11==dtMonth)&&31==dtDay)return!1;if(2==dtMonth){var i=dtYear%4==0&&(dtYear%100!=0||dtYear%400==0);if(dtDay>29||29==dtDay&&!i)return!1}return!0}function distributeHotelPax(t,e,a){var n,i=e+a,o=_.max([Math.ceil(t/2),Math.ceil(i/2)]),r="9",d="1";return o>t&&(o=t),roomsArray=[],n=[o],_.each(_.range(o),function(n){if(t>=1){var o={a:1,c:0,i:0};t--,e>=1&&i>=1&&(o.c+=1,e--,i--),a>=1&&i>=1&&(o.i+=1,a--,i--),roomsArray.push(o)}}),t>0&&_.each(roomsArray,function(e){t>=1&&(e.a+=1,t--)}),i>0&&_.each(roomsArray,function(t){t.c>0&&i>=1&&e>=1&&(t.c+=1,e--,i--),t.i>0&&i>=1&&a>=1&&(t.i+=1,a--,i--)}),_.each(roomsArray,function(t){var e=[];e.push(t.a),e.push(t.c+t.i),_.each(_.range(t.c),function(t){e.push(r)}),_.each(_.range(t.i),function(t){e.push(d)}),n.push(e.join("_"))}),n=n.join("-")}var source="",destination="",sourcecode="",destinationcode="",destinationid="",ddate="",adate="",adult="1",child="0",infant="0",roomstring="",sflag=1,hotelArr=[];$("#ddlArea").change(function(){$(this).get(0).selectedIndex;FilterByParameter_Hotel($(this).val(),"")}),$("#btnSearchHotel").click(function(){return destination=$("#txtHotelCity").val(),""==destination?(alert("City name is required."),!1):void HotelValidation()});var pageIndex=1,pageCount;$("#txtadult_Hotel").change(function(){$("#txtpassenger_Hotel").val(CountPassenger_Hotel()+" Passenger(s)")}),$("#txtchild_Hotel").change(function(){$("#txtpassenger_Hotel").val(CountPassenger_Hotel()+" Passenger(s)")}),$("#txtinfant_Hotel").change(function(){$("#txtpassenger_Hotel").val(CountPassenger_Hotel()+" Passenger(s)")});var rums,room,night,checkin,checkout,hc,rtc,rpc,ibp,fwdp,roomsArray=[];
